<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ì•„ì¹´ì´ë¸Œë©ìŠ¤ ë‰´ìŠ¤ | ì•„ì¹´ì´ë¸Œë©ìŠ¤</title>
  <link rel="stylesheet" href="style.css" />

  <style>
    /* Fade-in on scroll */
    .fade-in{
      opacity:0;
      transform: translateY(14px);
      transition: opacity .7s ease, transform .7s ease;
      will-change: opacity, transform;
    }
    .fade-in.is-visible{
      opacity:1;
      transform:none;
    }

    .subpage-head{ margin-bottom:24px; }
    .subpage-title{
      margin:10px 0 10px;
      letter-spacing:-0.03em;
      line-height:1.2;
      font-size:1.55rem;
    }
    .subpage-line{
      height:1px;
      background:var(--line);
      opacity:.9;
    }

    /* ê²€ìƒ‰ ë° í•„í„° ì˜ì—­ */
    .news-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      gap: 16px;
      flex-wrap: wrap;
    }

    .search-box {
      display: flex;
      gap: 8px;
      flex: 1;
      max-width: 400px;
    }

    .search-input {
      flex: 1;
      padding: 10px 14px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 0.92rem;
    }

    .search-input:focus {
      outline: none;
      border-color: #2d7da8;
      box-shadow: 0 0 0 3px rgba(45, 125, 168, 0.1);
    }

    .search-btn {
      padding: 10px 24px;
      background: linear-gradient(135deg, #1e5a7d 0%, #2d7da8 100%);
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .search-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(45, 125, 168, 0.3);
    }

    .total-count {
      font-size: 0.9rem;
      color: #6b7280;
      font-weight: 600;
    }

    /* ë‰´ìŠ¤ ëª©ë¡ */
    .news-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .news-item {
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 24px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .news-item:hover {
      border-color: #2d7da8;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      transform: translateY(-2px);
    }

    .news-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
      gap: 16px;
    }

    .news-title {
      font-size: 1.15rem;
      font-weight: 700;
      color: #1f2937;
      line-height: 1.4;
      flex: 1;
    }

    .news-date {
      font-size: 0.85rem;
      color: #6b7280;
      white-space: nowrap;
    }

    .news-summary {
      font-size: 0.95rem;
      color: #4b5563;
      line-height: 1.6;
      margin-bottom: 12px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .news-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 12px;
      border-top: 1px solid #f3f4f6;
    }

    .news-category {
      display: inline-block;
      padding: 4px 12px;
      background: #e0f2fe;
      color: #0369a1;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .news-views {
      font-size: 0.85rem;
      color: #9ca3af;
    }

    /* í˜ì´ì§€ë„¤ì´ì…˜ */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin-top: 40px;
    }

    .page-btn {
      padding: 8px 14px;
      border: 1px solid #d1d5db;
      background: white;
      color: #374151;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .page-btn:hover:not(.active):not(:disabled) {
      border-color: #2d7da8;
      color: #2d7da8;
      background: #f0f9ff;
    }

    .page-btn.active {
      background: linear-gradient(135deg, #1e5a7d 0%, #2d7da8 100%);
      color: white;
      border-color: #2d7da8;
    }

    .page-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* ë¹ˆ ìƒíƒœ */
    .empty-state {
      text-align: center;
      padding: 80px 20px;
      color: #6b7280;
    }

    .empty-state-icon {
      font-size: 4rem;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    .empty-state-text {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .empty-state-desc {
      font-size: 0.9rem;
    }

    /* ë¡œë”© */
    .loading {
      text-align: center;
      padding: 60px 20px;
      color: #6b7280;
    }

    .loading-spinner {
      display: inline-block;
      width: 40px;
      height: 40px;
      border: 4px solid #e5e7eb;
      border-top-color: #2d7da8;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 16px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      .news-controls {
        flex-direction: column;
        align-items: stretch;
      }

      .search-box {
        max-width: none;
      }

      .news-header {
        flex-direction: column;
        gap: 8px;
      }

      .news-date {
        align-self: flex-start;
      }

      .news-item {
        padding: 20px;
      }

      .pagination {
        gap: 4px;
      }

      .page-btn {
        padding: 6px 10px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>

<body>
<header>
  <div class="header-inner">
    <a class="logo" href="00_index.html" aria-label="ì•„ì¹´ì´ë¸Œë©ìŠ¤ í™ˆ">
      <img src="logo.png" alt="ì•„ì¹´ì´ë¸Œë©ìŠ¤ ë¡œê³ " style="height:28px;width:auto" onerror="this.style.display='none';this.parentElement.textContent='ARCHIVE LABS';" />
    </a>

    <button class="menu-toggle" aria-label="ë©”ë‰´ ì—´ê¸°" aria-expanded="false">
      â˜°
    </button>

    <nav class="nav" aria-label="ì£¼ìš” ë©”ë‰´">
      <div class="nav-item has-sub">
        <a href="01_about.html">ì•„ì¹´ì´ë¸Œë©ìŠ¤ ì†Œê°œ</a>
        <div class="submenu" role="menu">
          <a href="01_1_greeting.html">ì¸ì‚¬ë§</a>
          <a href="01_2_vision.html">ë¹„ì „ ë° ê°€ì¹˜</a>
          <a href="01_3_org.html">ì¡°ì§ë„</a>
          <a href="01_4_history.html">ì—°í˜</a>
          <a href="01_5_location.html">ì°¾ì•„ì˜¤ì‹œëŠ” ê¸¸</a>
        </div>
      </div>

      <div class="nav-item has-sub">
        <a href="02_research.html">ì—°êµ¬ì‚¬ì—…ì˜ì—­</a>
        <div class="submenu" role="menu">
          <a href="02_1_consulting.html">ì»¨ì„¤íŒ…</a>
          <a href="02_2_diagnosis.html">ì§„ë‹¨ì¡°ì‚¬Â·ë¶„ì„</a>
          <a href="02_3_policy.html">ì •ì±…ì—°êµ¬</a>
          <a href="02_4_education.html">êµìœ¡</a>
          <a href="02_5_partners.html">ìˆ˜í–‰ê¸°ê´€</a>
        </div>
      </div>

      <div class="nav-item no-sub">
        <a href="03_news.html">ì•„ì¹´ì´ë¸Œë©ìŠ¤ ë‰´ìŠ¤</a>
      </div>

      <div class="nav-item no-sub">
        <a href="04_contact.html">ìƒë‹´ë¬¸ì˜</a>
      </div>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="hero-content">
    <h1>ì•„ì¹´ì´ë¸Œë©ìŠ¤ ë‰´ìŠ¤</h1>
    <div class="hero-actions"></div>
  </div>
</section>

<main class="container">
  <section class="page-wrap" style="margin-top:-28px">
    <div class="card" style="padding:32px 28px 40px">
      
      <div class="subpage-head fade-in">
        <h2 class="subpage-title">ìµœì‹  ì†Œì‹</h2>
        <div class="subpage-line"></div>
      </div>

      <!-- ê²€ìƒ‰ ë° í•„í„° -->
      <div class="news-controls fade-in">
        <div class="search-box">
          <input type="text" class="search-input" id="searchInput" placeholder="ì œëª© ë˜ëŠ” ë‚´ìš©ìœ¼ë¡œ ê²€ìƒ‰..." />
          <button class="search-btn" onclick="searchNews()">ê²€ìƒ‰</button>
        </div>
        <div class="total-count">
          ì „ì²´ <strong id="totalCount">0</strong>ê±´
        </div>
      </div>

      <!-- ë‰´ìŠ¤ ëª©ë¡ -->
      <div id="newsContainer">
        <div class="loading">
          <div class="loading-spinner"></div>
          <div>ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>
      </div>

      <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
      <div class="pagination" id="pagination"></div>

    </div>
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    <div class="foot-rowwrap">
      <div class="foot-brand">
        <img class="foot-logo-img" src="logo.png" alt="ì•„ì¹´ì´ë¸Œë©ìŠ¤ ë¡œê³ "
             onerror="this.style.display='none'; this.insertAdjacentHTML('afterend','<div class=&quot;foot-logo-fallback&quot;>ArchiveLabs</div>');" />
      </div>

      <div class="foot-info">
        <div class="foot-line">(ì£¼) ì•„ì¹´ì´ë¸Œë©ìŠ¤  |  ëŒ€í‘œì „í™”: (033) 813-8080  |  ì´ë©”ì¼: alabs2000@naver.com</div>
        <div class="foot-line">ì£¼ì†Œ: (26404) ê°•ì›íŠ¹ë³„ìì¹˜ë„ ì›ì£¼ì‹œ í¥ì—…ë©´ í•œë¼ëŒ€ê¸¸ 28 í•œë¼ëŒ€í•™êµ ì°½ì—…ë³´ìœ¡ì„¼í„° 2ê´€ 308í˜¸</div>
        <div class="foot-line">ëŒ€í‘œì: ì´ìŠ¹ìš°  |  ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 267-81-01936</div>
        <div class="foot-copy">COPYRIGHT@2026 BY Archivelabs ALL RIGHT RESERVED</div>
      </div>
    </div>
  </div>
</footer>

<script src="script.js"></script>
<script>
  // âš ï¸ ì—¬ê¸°ì— êµ¬ê¸€ Apps Script Web App URLì„ ì…ë ¥í•˜ì„¸ìš”
  const GOOGLE_SCRIPT_URL = 'YOUR_GOOGLE_SCRIPT_URL_HERE';

  let allNews = [];
  let filteredNews = [];
  let currentPage = 1;
  const itemsPerPage = 10;

  // í˜ì´ë“œì¸ ì• ë‹ˆë©”ì´ì…˜
  (function(){
    var els = document.querySelectorAll('.fade-in');
    if(!('IntersectionObserver' in window) || !els.length){
      els.forEach(function(el){ el.classList.add('is-visible'); });
      return;
    }
    var io = new IntersectionObserver(function(entries){
      entries.forEach(function(entry){
        if(entry.isIntersecting){
          entry.target.classList.add('is-visible');
          io.unobserve(entry.target);
        }
      });
    }, { threshold: 0.15 });
    els.forEach(function(el){ io.observe(el); });
  })();

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ë‰´ìŠ¤ ë¶ˆëŸ¬ì˜¤ê¸°
  window.addEventListener('DOMContentLoaded', function() {
    loadNews();
  });

  // ë‰´ìŠ¤ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
  async function loadNews() {
    try {
      // URL í™•ì¸
      if (GOOGLE_SCRIPT_URL === 'YOUR_GOOGLE_SCRIPT_URL_HERE') {
        showEmptyState('ê´€ë¦¬ìê°€ ì•„ì§ êµ¬ê¸€ ìŠ¤í¬ë¦½íŠ¸ URLì„ ì„¤ì •í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
        return;
      }

      const response = await fetch(GOOGLE_SCRIPT_URL + '?action=getNews');
      const data = await response.json();
      
      if (data.result === 'success') {
        allNews = data.news || [];
        filteredNews = [...allNews];
        displayNews();
      } else {
        showEmptyState('ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      }
    } catch (error) {
      console.error('Error loading news:', error);
      showEmptyState('ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    }
  }

  // ë‰´ìŠ¤ í‘œì‹œ
  function displayNews() {
    const container = document.getElementById('newsContainer');
    const totalCount = document.getElementById('totalCount');
    
    totalCount.textContent = filteredNews.length;

    if (filteredNews.length === 0) {
      showEmptyState('ë“±ë¡ëœ ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    // í˜ì´ì§€ë„¤ì´ì…˜ ê³„ì‚°
    const totalPages = Math.ceil(filteredNews.length / itemsPerPage);
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const pageNews = filteredNews.slice(startIndex, endIndex);

    // ë‰´ìŠ¤ ëª©ë¡ ìƒì„±
    let html = '<div class="news-list">';
    
    pageNews.forEach(news => {
      html += `
        <div class="news-item fade-in" onclick="viewNews('${news.id}')">
          <div class="news-header">
            <div class="news-title">${news.title}</div>
            <div class="news-date">${news.date}</div>
          </div>
          <div class="news-summary">${news.summary}</div>
          <div class="news-footer">
            <span class="news-category">${news.category}</span>
            <span class="news-views">ì¡°íšŒ ${news.views}</span>
          </div>
        </div>
      `;
    });
    
    html += '</div>';
    container.innerHTML = html;

    // í˜ì´ë“œì¸ ì ìš©
    setTimeout(() => {
      document.querySelectorAll('.news-item').forEach(el => {
        el.classList.add('is-visible');
      });
    }, 50);

    // í˜ì´ì§€ë„¤ì´ì…˜ ìƒì„±
    createPagination(totalPages);
  }

  // í˜ì´ì§€ë„¤ì´ì…˜ ìƒì„±
  function createPagination(totalPages) {
    const pagination = document.getElementById('pagination');
    
    if (totalPages <= 1) {
      pagination.innerHTML = '';
      return;
    }

    let html = '';
    
    // ì´ì „ ë²„íŠ¼
    html += `<button class="page-btn" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>â—€</button>`;
    
    // í˜ì´ì§€ ë²ˆí˜¸
    const maxVisible = 5;
    let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
    let endPage = Math.min(totalPages, startPage + maxVisible - 1);
    
    if (endPage - startPage < maxVisible - 1) {
      startPage = Math.max(1, endPage - maxVisible + 1);
    }

    for (let i = startPage; i <= endPage; i++) {
      html += `<button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
    }
    
    // ë‹¤ìŒ ë²„íŠ¼
    html += `<button class="page-btn" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>â–¶</button>`;
    
    pagination.innerHTML = html;
  }

  // í˜ì´ì§€ ë³€ê²½
  function changePage(page) {
    const totalPages = Math.ceil(filteredNews.length / itemsPerPage);
    if (page < 1 || page > totalPages) return;
    
    currentPage = page;
    displayNews();
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // ê²€ìƒ‰
  function searchNews() {
    const keyword = document.getElementById('searchInput').value.toLowerCase().trim();
    
    if (keyword === '') {
      filteredNews = [...allNews];
    } else {
      filteredNews = allNews.filter(news => 
        news.title.toLowerCase().includes(keyword) || 
        news.summary.toLowerCase().includes(keyword) ||
        news.content.toLowerCase().includes(keyword)
      );
    }
    
    currentPage = 1;
    displayNews();
  }

  // ì—”í„°í‚¤ë¡œ ê²€ìƒ‰
  document.getElementById('searchInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      searchNews();
    }
  });

  // ë¹ˆ ìƒíƒœ í‘œì‹œ
  function showEmptyState(message) {
    const container = document.getElementById('newsContainer');
    container.innerHTML = `
      <div class="empty-state">
        <div class="empty-state-icon">ğŸ“°</div>
        <div class="empty-state-text">${message}</div>
        <div class="empty-state-desc">ìƒˆë¡œìš´ ì†Œì‹ì´ ì—…ë°ì´íŠ¸ë˜ë©´ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</div>
      </div>
    `;
    document.getElementById('pagination').innerHTML = '';
  }

  // ë‰´ìŠ¤ ìƒì„¸ë³´ê¸° (ìƒˆ í˜ì´ì§€ë¡œ ì´ë™)
  function viewNews(newsId) {
    window.location.href = `03_news_detail.html?id=${newsId}`;
  }
</script>
</body>
</html>
