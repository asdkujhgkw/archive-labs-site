<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>아카이브랩스</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header>
  <div class="header-inner">
    <div class="logo">아카이브랩스</div>
    <div class="menu-toggle" onclick="toggleMenu()">☰</div>


    <nav id="mainNav" class="nav">
      <span class="nav-item">
        <a href="index.html#company" onclick="toggleSub(event)">기업소개</a>
        <div class="submenu">
          <a href="index-history.html">연혁 및 주요 사업실적</a>
          <a href="index-partners.html">주요 파트너사</a>
        </div>
      </span>

      <span class="nav-item">
        <a href="tasks.html" onclick="toggleSub(event)">수행과업</a>
        <div class="submenu">
          <a href="tasks-government.html">정부용역 보고서</a>
          <a href="tasks-consulting.html">논문 컨설팅</a>
        </div>
      </span>

      <span class="nav-item">
        <a href="contact.html" onclick="toggleSub(event)">Contact</a>
        <div class="submenu">
          <a href="contact-info.html">연락처</a>
          <a href="contact-qna.html">1:1 질문</a>
          <a href="contact-map.html">오시는 길</a>
        </div>
      </span>
    </nav>
  </div>
</header>

<div class="container">
  <h1>수행과업</h1>
  <p>공공분야 조사용역 및 컨설팅 수행 영역을 소개합니다.</p>

  <div class="card">
    <h2>서비스 영역</h2>
    <p style="margin-top:10px;">
      <a class="btn btn-primary" href="tasks-government.html">정부용역 보고서</a>
      <a class="btn" href="tasks-consulting.html">논문 컨설팅</a>
    </p>
  </div>

  <div class="card">
    <h2>예시 수행 내역</h2>
    <p style="margin-top:10px;">
      • (예시) ○○정책 만족도 조사<br>
      • (예시) ○○사업 실태조사<br>
      • (예시) ○○사업 성과평가 및 환류전략 수립
    </p>
  </div>
</div>

<footer>© 2026 Archive Labs</footer>

<script>
function toggleMenu() {
  const nav = document.getElementById("mainNav");
  if (!nav) return;
  nav.classList.toggle("active");
}

function toggleSub(e) {
  if (window.innerWidth > 560) return;
  e.preventDefault();
  const item = e.target.closest(".nav-item");
  if (item) item.classList.toggle("open");
}

/* ====== Header compact on scroll ====== */
(function headerCompact(){
  const header = document.querySelector("header");
  if (!header) return;
  const onScroll = () => header.classList.toggle("compact", window.scrollY > 10);
  window.addEventListener("scroll", onScroll, { passive: true });
  onScroll();
})();

/* ====== Active nav (page + section) ====== */
(function setActiveNav(){
  const navRoot = document.getElementById("mainNav");
  if (!navRoot) return;

  const path = location.pathname.split("/").pop() || "index.html";
  const hash = location.hash;

  const links = navRoot.querySelectorAll("a");
  links.forEach(a => a.classList.remove("active"));

  // 1) current page
  links.forEach(a => {
    const href = a.getAttribute("href") || "";
    const file = href.split("#")[0];
    if (file && file === path) a.classList.add("active");
  });

  // 2) hash specific
  if (hash) {
    links.forEach(a => {
      const href = a.getAttribute("href") || "";
      if (href.includes(hash) && (href.split("#")[0] === "" || href.split("#")[0] === path)) {
        a.classList.add("active");
      }
    });
  }

  // 3) section tracking (pages that have ids matching top links)
  const sections = document.querySelectorAll("section[id], .card[id]");
  if (!sections.length) return;

  const topLinks = Array.from(navRoot.querySelectorAll(".nav-item > a"));
  const idToLink = new Map();
  topLinks.forEach(a => {
    const href = a.getAttribute("href") || "";
    if (!href.includes("#")) return;
    const file = href.split("#")[0] || path;
    const id = href.split("#")[1];
    if (file === path && id) idToLink.set(id, a);
  });

  if (!idToLink.size) return;

  const io = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;
      const a = idToLink.get(entry.target.id);
      if (!a) return;
      topLinks.forEach(x => x.classList.remove("active"));
      a.classList.add("active");
    });
  }, { threshold: 0.35 });

  sections.forEach(sec => io.observe(sec));
})();

/* ====== Close mobile menu when clicking outside ====== */
(function closeOnOutsideClick(){
  const nav = document.getElementById("mainNav");
  const toggle = document.querySelector(".menu-toggle");
  if (!nav || !toggle) return;

  document.addEventListener("click", (e) => {
    if (window.innerWidth > 560) return;
    if (!nav.classList.contains("active")) return;

    const insideNav = nav.contains(e.target);
    const insideToggle = toggle.contains(e.target);
    if (!insideNav && !insideToggle) {
      nav.classList.remove("active");
      document.querySelectorAll(".nav-item.open").forEach(x => x.classList.remove("open"));
    }
  });
})();
</script>
</body>
</html>
